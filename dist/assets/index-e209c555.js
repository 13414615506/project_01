import{_ as $,e as W,a as K}from"./exportExcel-ea569a47.js";import{J as Q,d as ee,u as te,r,S as le,G as oe,y as ae,e as n,o as m,f as E,g as a,w as s,h as d,j as x,v as z,n as se,m as N,C as B,F as D,q as re,_ as ie}from"./index-c7a0cc4e.js";import{V as ne}from"./vue-draggable-next.esm-bundler-8be8cb1d.js";const de=(y,w,u)=>Q.post(`/admin/acr/getacrtab/${y}/${w}`,u),ue={id:"elcheckbox"},he={class:"basicEx"},pe=ee({__name:"index",setup(y){let w=te(),u=r(1),c=r(10),k=r(0),V=r([]),h=r([]);le(()=>{localStorage.getItem("acrtabTableFilter")?(h.value=JSON.parse(localStorage.getItem("acrtabTableFilter")||""),f(h.value)):h.value=i.value.map(o=>o.label)}),oe(async()=>{await b()});let F=r(w.buttons.includes("btn.acrtab.confirm"));const v=r("1"),_=r(window.innerHeight-316),C=[Object.assign({},{id:"1",index:1,condition:"equal",operate:"and",field:"",value:"",header:!0,checked:!0,pid:-1,floor:1})];let P=1;const U=[{key:"请购单别",val:"TB001"},{key:"请购单号",val:"TB002"},{key:"请购序号",val:"TB003"},{key:"品号",val:"TB004"},{key:"品名",val:"PM"},{key:"规格",val:"GG"},{key:"请购日期",val:"TA003"},{key:"审核码",val:"TB025"}],G={TB025:{dom:"select",data:[{key:"已审核",val:"Y"},{key:"未审核",val:"N"},{key:"审核失败",val:"U"},{key:"作废",val:"V"}]},TA003:{dom:"date"}},I=()=>{b()},b=async(o=1)=>{u.value=o;let e={conditions:[{}]};e.conditions.splice(0,1),C.forEach(p=>{e.conditions.push(p)});let l=await de(u.value,c.value,e);l.code==200&&(k.value=l.data.total,l.data.records.forEach((p,T)=>{p.index=T+1+(u.value-1)*c.value}),V.value=l.data.records)},O=()=>{b()},i=r([{strlen:18,label:"销售发票",prop:"XSFP",width:170,vhide:!0,orderby:!0,isShow:!0,sort:0},{strlen:12,label:"来源别",prop:"LYB",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"来源单号",prop:"LYDH",width:120,vhide:!0,isShow:!0,sort:0},{strlen:15,label:"单据日期",prop:"TB008",width:90,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"备注",prop:"TB011",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"审核码",prop:"TB012",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"科目编号",prop:"TB013",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"科目名称",prop:"MA003",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币无税金额",prop:"TB017",width:110,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币税额",prop:"TB018",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本币无税金额",prop:"TB019",width:110,vhide:!1,isShow:!0,sort:0},{strlen:8,label:"本币税额",prop:"TB020",width:85,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"部门",prop:"TB021",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"结账数量",prop:"TB022",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"结账单价",prop:"TB023",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"折扣率",prop:"TB024",width:70,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"品号",prop:"TB039",width:120,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"品名",prop:"PM",width:140,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"规格",prop:"GG",width:230,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"单位",prop:"TB042",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币已核销金额",prop:"TB043",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本币已核销金额",prop:"TB044",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币已冲减金额",prop:"TB045",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本币已冲减金额",prop:"TB046",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本币差额",prop:"TB047",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"核销状态",prop:"HXZT",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"累计调汇金额",prop:"TB050",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本次开票原币无税金额",prop:"TB051",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本次开票本币无税金额",prop:"TB052",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"审核日期",prop:"TA003",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"客户编号",prop:"TA004",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"客户名称",prop:"MA002",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"客户全称",prop:"TA008",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"币种",prop:"TA009",width:70,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"汇率",prop:"TA010",width:70,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"发票种类",prop:"FPZL",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"税种",prop:"SZ",width:70,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"生成分录-收入",prop:"TA013",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"生成分录-销货成本",prop:"TA014",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"发票号码",prop:"TA015",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"发票日期",prop:"TA016",width:120,vhide:!1,isShow:!0,sort:0}]),L=["TD039","TD035","TD035"],M=(o,e)=>(o.rowIndex+1)%2===0?"oddRow":"evenRow";ae(v,(o,e)=>{v.value=="1"?_.value=window.innerHeight-316:_.value=window.innerHeight-228});const f=o=>{i.value.forEach(l=>{o.indexOf(l.label)!=-1?(l.isShow=!0,l.sort=o.indexOf(l.label)-o.length):l.isShow=!1}),i.value.sort((l,p)=>l.sort-p.sort),localStorage.setItem("acrtabTableFilter",JSON.stringify(o));const e=o.length;S.value=e===i.value.length,g.value=e>0&&e<i.value.length},S=r(!1),g=r(!1),q=o=>{h.value=o?i.value.map(e=>e.label):[],g.value=!1,f(h.value)};return(o,e)=>{const l=n("el-button"),p=n("el-card"),T=n("el-collapse-item"),H=n("el-collapse"),R=n("Grid"),A=n("el-checkbox"),j=n("el-checkbox-group"),J=n("el-popover"),X=n("el-icon"),Y=n("el-pagination");return m(),E(D,null,[a(H,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t)},{default:s(()=>[a(T,{title:"查询条件",name:"1",style:{}},{default:s(()=>[a(p,{class:"form",style:{}},{default:s(()=>[a($,{floor:d(P),conditionList:C,"key-list":U,"val-list":G},null,8,["floor"]),a(l,{type:"primary",size:"default",onClick:I},{default:s(()=>[x("查询")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(p,{style:{margin:"10px 0px"}},{default:s(()=>[d(w).buttons.includes("btn.acrtab.exportexcel")?(m(),z(l,{key:0,type:"primary",size:"default",onClick:e[1]||(e[1]=t=>d(W)("销售发票信息.xlsx","#acrtab-table"))},{default:s(()=>[x("导出EXCEL")]),_:1})):se("",!0),a(X,{size:20,style:{float:"right","font-size":"33px","padding-right":"50px"},class:"grid"},{default:s(()=>[a(J,{placement:"bottom",trigger:"hover",width:"80"},{reference:s(()=>[a(l,null,{default:s(()=>[a(R)]),_:1})]),default:s(()=>[N("div",ue,[N("div",he,[a(A,{modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=t=>S.value=t),indeterminate:g.value,onChange:q},{default:s(()=>[x("全选")]),_:1},8,["modelValue","indeterminate"])]),a(j,{modelValue:d(h),"onUpdate:modelValue":e[4]||(e[4]=t=>B(h)?h.value=t:h=t),onChange:f,class:"checkbox-wrap"},{default:s(()=>[a(d(ne),{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),onEnd:f},{default:s(()=>[(m(!0),E(D,null,re(i.value,(t,Z)=>(m(),z(A,{key:Z,label:t.label,size:"large",style:{display:"block"}},null,8,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(K,{id:"acrtab-table",tableData:d(V),height:_.value,columns:i.value,sumArray:L,"row-class-name":M,checkVhide:!1,butPremission:d(F)},null,8,["tableData","height","columns","butPremission"]),a(Y,{"current-page":d(u),"onUpdate:currentPage":e[5]||(e[5]=t=>B(u)?u.value=t:u=t),"page-size":d(c),"onUpdate:pageSize":e[6]||(e[6]=t=>B(c)?c.value=t:c=t),"page-sizes":[10,30,100,500,2e3],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:d(k),onCurrentChange:b,onSizeChange:O},null,8,["current-page","page-size","total"])]),_:1})],64)}}});const fe=ie(pe,[["__scopeId","data-v-33c94a56"]]);export{fe as default};
