import{_ as $,e as W,a as X}from"./exportExcel-ea569a47.js";import{J as Z,d as K,u as Q,r,S as ee,G as te,y as le,e as n,o as w,f as E,g as a,w as s,h as p,j as x,v as N,n as oe,m as B,C as S,F as G,q as ae,_ as se}from"./index-c7a0cc4e.js";const re=(T,_,i)=>Z.post(`/admin/cop/getcoptcd/${T}/${_}`,i),ne={id:"elcheckbox"},ie={class:"basicEx"},de=K({__name:"index",setup(T){let _=Q(),i=r(1),h=r(10),D=r(0),C=r([]),d=r([]);ee(()=>{localStorage.getItem("coptcdTableFilter")?(d.value=JSON.parse(localStorage.getItem("coptcdTableFilter")||""),b(d.value)):d.value=u.value.map(l=>l.label)}),te(async()=>{await f()});const v=r("1"),m=r(window.innerHeight-316),V=[Object.assign({},{id:"1",index:1,condition:"equal",operate:"and",field:"",value:"",header:!0,checked:!0,pid:-1,floor:1})];let H=1;const I=[{key:"订单单别",val:"TD001"},{key:"订单单号",val:"TD002"},{key:"订单序号",val:"TD003"},{key:"品号",val:"PH"},{key:"品名",val:"PM"},{key:"规格",val:"GG"},{key:"审核码",val:"TD021"},{key:"结束码",val:"TD016"},{key:"客户单号",val:"TC012"},{key:"客户品号",val:"TD014"},{key:"预交货日",val:"TD013"}],U={TD016:{dom:"select",data:[{key:"已结束",val:"Y"},{key:"未结束",val:"N"},{key:"指定结束",val:"y"}]},TD021:{dom:"select",data:[{key:"已审核",val:"Y"},{key:"未审核",val:"N"},{key:"作废",val:"V"}]},TD013:{dom:"date"}},F=()=>{f()},f=async(l=1)=>{i.value=l;let e={conditions:[{}]};e.conditions.splice(0,1),V.forEach(c=>{e.conditions.push(c)});let t=await re(i.value,h.value,e);t.code==200&&(D.value=t.data.total,t.data.records.forEach((c,k)=>{c.index=k+1+(i.value-1)*h.value}),C.value=t.data.records)},J=()=>{f()},u=r([{strlen:14,label:"订单号",prop:"DDDH",width:165,vhide:!0,orderby:!0,isShow:!0,sort:0},{strlen:12,label:"品号",prop:"PH",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"品名",prop:"PM",width:150,vhide:!0,isShow:!0,sort:0},{strlen:15,label:"规格",prop:"GG",width:230,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"订单日期",prop:"TC003",width:95,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"客户编号",prop:"TC004",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"客户单号",prop:"TC012",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"订单数量",prop:"TD008",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"已交数量",prop:"TD009",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"赠品量",prop:"TD024",width:70,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"赠品已交量",prop:"TD025",width:95,vhide:!1,isShow:!0,sort:0},{strlen:8,label:"单位",prop:"TD010",width:60,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"单价",prop:"TD011",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"金额",prop:"TD012",width:95,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"预交货日",prop:"TD013",width:95,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"客户品号",prop:"TD014",width:85,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"结束码",prop:"TD016",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"税前金额",prop:"TD038",width:95,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"人工单价",prop:"RGDJ",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"主材料单价",prop:"ZCLDJ",width:95,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"包材单价",prop:"BCDJ",width:85,vhide:!1,isShow:!0,sort:0}]),O=["TD008","TD009","TD012"],q=(l,e)=>(l.rowIndex+1)%2===0?"oddRow":"evenRow";le(v,(l,e)=>{v.value=="1"?m.value=window.innerHeight-316:m.value=window.innerHeight-228});const b=l=>{u.value.forEach(t=>{l.includes(t.label)?(t.isShow=!0,t.sort=l.indexOf(t.label)-l.length):t.isShow=!1}),u.value.sort((t,c)=>t.sort-c.sort),localStorage.setItem("coptcdTableFilter",JSON.stringify(l));const e=l.length;g.value=e===u.value.length,y.value=e>0&&e<u.value.length},g=r(!1),y=r(!1),P=l=>{d.value=l?u.value.map(e=>e.label):[],y.value=!1,b(d.value)};return(l,e)=>{const t=n("el-button"),c=n("el-card"),k=n("el-collapse-item"),R=n("el-collapse"),A=n("Grid"),z=n("el-checkbox"),L=n("el-checkbox-group"),M=n("el-popover"),j=n("el-icon"),Y=n("el-pagination");return w(),E(G,null,[a(R,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o)},{default:s(()=>[a(k,{title:"查询条件",name:"1",style:{}},{default:s(()=>[a(c,{class:"form",style:{}},{default:s(()=>[a($,{floor:p(H),conditionList:V,"key-list":I,"val-list":U},null,8,["floor"]),a(t,{type:"primary",size:"default",onClick:F},{default:s(()=>[x("查询")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(c,{style:{margin:"10px 0px"}},{default:s(()=>[p(_).buttons.includes("btn.coptcd.exportexcel")?(w(),N(t,{key:0,type:"primary",size:"default",onClick:e[1]||(e[1]=o=>p(W)("订单信息.xlsx","#coptcd-table"))},{default:s(()=>[x("导出EXCEL")]),_:1})):oe("",!0),a(j,{size:20,style:{float:"right","font-size":"33px","padding-right":"50px"},class:"grid"},{default:s(()=>[a(M,{placement:"bottom",trigger:"hover",width:"80"},{reference:s(()=>[a(t,null,{default:s(()=>[a(A)]),_:1})]),default:s(()=>[B("div",ne,[B("div",ie,[a(z,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),indeterminate:y.value,onChange:P},{default:s(()=>[x("全选")]),_:1},8,["modelValue","indeterminate"])]),a(L,{modelValue:p(d),"onUpdate:modelValue":e[3]||(e[3]=o=>S(d)?d.value=o:d=o),onChange:b,class:"checkbox-wrap"},{default:s(()=>[(w(!0),E(G,null,ae(u.value,(o,ce)=>(w(),N(z,{label:o.label,size:"large",style:{display:"block"}},null,8,["label"]))),256))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(X,{id:"coptcd-table",tableData:p(C),height:m.value,columns:u.value,sumArray:O,"row-class-name":q,checkVhide:!1},null,8,["tableData","height","columns"]),a(Y,{"current-page":p(i),"onUpdate:currentPage":e[4]||(e[4]=o=>S(i)?i.value=o:i=o),"page-size":p(h),"onUpdate:pageSize":e[5]||(e[5]=o=>S(h)?h.value=o:h=o),"page-sizes":[10,30,100,500,2e3],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:p(D),onCurrentChange:f,onSizeChange:J},null,8,["current-page","page-size","total"])]),_:1})],64)}}});const ve=se(de,[["__scopeId","data-v-f64d792c"]]);export{ve as default};
