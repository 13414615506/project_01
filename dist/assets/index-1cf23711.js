import{_ as Y,e as K,a as Q}from"./exportExcel-ea569a47.js";import{J as Z,d as ee,u as te,r,S as le,G as oe,y as ae,e as n,o as m,f as E,g as a,w as s,h as d,j as x,v as z,n as se,m as N,C as y,F as B,q as re,_ as ie}from"./index-c7a0cc4e.js";import{V as ne}from"./vue-draggable-next.esm-bundler-8be8cb1d.js";const de=(H,v,u)=>Z.post(`/admin/pur/getpurtgh/${H}/${v}`,u),ue={id:"elcheckbox"},pe={class:"basicEx"},he=ee({__name:"index",setup(H){let v=te(),u=r(1),c=r(10),k=r(0),V=r([]),p=r([]);le(()=>{localStorage.getItem("purtghTableFilter")?(p.value=JSON.parse(localStorage.getItem("purtghTableFilter")||""),b(p.value)):p.value=i.value.map(o=>o.label)}),oe(async()=>{await f()});let D=r(v.buttons.includes("btn.copth.confirm"));const w=r("1"),g=r(window.innerHeight-316),C=[Object.assign({},{id:"1",index:1,condition:"equal",operate:"and",field:"",value:"",header:!0,checked:!0,pid:-1,floor:1})];let U=1;const I=[{key:"进货单别",val:"TH001"},{key:"进货单号",val:"TH002"},{key:"进货序号",val:"TH003"},{key:"品号",val:"TH004"},{key:"品名",val:"PM"},{key:"规格",val:"GG"},{key:"采购单别",val:"TH011"},{key:"采购单号",val:"TH012"},{key:"采购序号",val:"TH013"},{key:"验收日期",val:"TH014"},{key:"审核码",val:"TH030"}],O={TH030:{dom:"select",data:[{key:"已审核",val:"Y"},{key:"未审核",val:"N"},{key:"审核失败",val:"U"},{key:"作废",val:"V"}]},TH014:{dom:"date"}},P=()=>{f()},f=async(o=1)=>{u.value=o;let e={conditions:[{}]};e.conditions.splice(0,1),C.forEach(h=>{e.conditions.push(h)});let l=await de(u.value,c.value,e);l.code==200&&(k.value=l.data.total,l.data.records.forEach((h,T)=>{h.index=T+1+(u.value-1)*c.value}),V.value=l.data.records)},F=()=>{f()},i=r([{strlen:18,label:"进货单号",prop:"JHDH",width:180,vhide:!0,orderby:!0,isShow:!0,sort:0},{strlen:12,label:"品号",prop:"TH004",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"品名",prop:"PM",width:150,vhide:!0,isShow:!0,sort:0},{strlen:15,label:"规格",prop:"GG",width:230,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"进货数量",prop:"TH007",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"单位",prop:"TH008",width:65,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"计价数量",prop:"TH016",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"验收数量",prop:"TH015",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"验退数量",prop:"TH017",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币单位进价",prop:"TH018",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币进货金额",prop:"TH019",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"验收日期",prop:"TH014",width:100,vhide:!1,isShow:!0,sort:0},{strlen:8,label:"进货日期",prop:"TG003",width:100,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"供应商编号",prop:"TG005",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"供应商简称",prop:"TG021",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"供应商单号",prop:"TG006",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"币种",prop:"TG007",width:70,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"汇率",prop:"TG008",width:70,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"发票种类",prop:"TG009",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"税种",prop:"TG010",width:70,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"暂不付款",prop:"TH026",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"超期码",prop:"TH027",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"审核码",prop:"TH030",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"开票码",prop:"TH031",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"备注",prop:"TH033",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"库存数量",prop:"TH034",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"审核者",prop:"MV002",width:75,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币税前金额",prop:"TH045",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"原币税额",prop:"TH045",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本币税前金额",prop:"TH047",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"本币税额",prop:"TH048",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"已开票数量",prop:"MV002",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"税率",prop:"TH060",width:65,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"报废数量",prop:"TH061",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"计价单位",prop:"TH064",width:85,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"库存单位",prop:"TH065",width:85,vhide:!1,isShow:!0,sort:0}]),M=["TD039","TD035","TD035"],q=(o,e)=>(o.rowIndex+1)%2===0?"oddRow":"evenRow";ae(w,(o,e)=>{w.value=="1"?g.value=window.innerHeight-316:g.value=window.innerHeight-228});const b=o=>{i.value.forEach(l=>{o.indexOf(l.label)!=-1?(l.isShow=!0,l.sort=o.indexOf(l.label)-o.length):l.isShow=!1}),i.value.sort((l,h)=>l.sort-h.sort),localStorage.setItem("purtghTableFilter",JSON.stringify(o));const e=o.length;_.value=e===i.value.length,S.value=e>0&&e<i.value.length},_=r(!1),S=r(!1),A=o=>{p.value=o?i.value.map(e=>e.label):[],S.value=!1,b(p.value)};return(o,e)=>{const l=n("el-button"),h=n("el-card"),T=n("el-collapse-item"),J=n("el-collapse"),R=n("Grid"),G=n("el-checkbox"),j=n("el-checkbox-group"),L=n("el-popover"),$=n("el-icon"),W=n("el-pagination");return m(),E(B,null,[a(J,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value=t)},{default:s(()=>[a(T,{title:"查询条件",name:"1",style:{}},{default:s(()=>[a(h,{class:"form",style:{}},{default:s(()=>[a(Y,{floor:d(U),conditionList:C,"key-list":I,"val-list":O},null,8,["floor"]),a(l,{type:"primary",size:"default",onClick:P},{default:s(()=>[x("查询")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(h,{style:{margin:"10px 0px"}},{default:s(()=>[d(v).buttons.includes("btn.purtgh.exportexcel")?(m(),z(l,{key:0,type:"primary",size:"default",onClick:e[1]||(e[1]=t=>d(K)("进货单信息.xlsx","#purtgh-table"))},{default:s(()=>[x("导出EXCEL")]),_:1})):se("",!0),a($,{size:20,style:{float:"right","font-size":"33px","padding-right":"50px"},class:"grid"},{default:s(()=>[a(L,{placement:"bottom",trigger:"hover",width:"80"},{reference:s(()=>[a(l,null,{default:s(()=>[a(R)]),_:1})]),default:s(()=>[N("div",ue,[N("div",pe,[a(G,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t),indeterminate:S.value,onChange:A},{default:s(()=>[x("全选")]),_:1},8,["modelValue","indeterminate"])]),a(j,{modelValue:d(p),"onUpdate:modelValue":e[4]||(e[4]=t=>y(p)?p.value=t:p=t),onChange:b,class:"checkbox-wrap"},{default:s(()=>[a(d(ne),{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),onEnd:b},{default:s(()=>[(m(!0),E(B,null,re(i.value,(t,X)=>(m(),z(G,{key:X,label:t.label,size:"large",style:{display:"block"}},null,8,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(Q,{id:"purtgh-table",tableData:d(V),height:g.value,columns:i.value,sumArray:M,"row-class-name":q,checkVhide:!1,butPremission:d(D)},null,8,["tableData","height","columns","butPremission"]),a(W,{"current-page":d(u),"onUpdate:currentPage":e[5]||(e[5]=t=>y(u)?u.value=t:u=t),"page-size":d(c),"onUpdate:pageSize":e[6]||(e[6]=t=>y(c)?c.value=t:c=t),"page-sizes":[10,30,100,500,2e3],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:d(k),onCurrentChange:f,onSizeChange:F},null,8,["current-page","page-size","total"])]),_:1})],64)}}});const be=ie(he,[["__scopeId","data-v-6620d6b3"]]);export{be as default};
