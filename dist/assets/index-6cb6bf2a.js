import{_ as W,e as X,a as Q}from"./exportExcel-ea569a47.js";import{J as Z,d as ee,u as te,r,S as le,G as oe,y as ae,e as i,o as b,f as E,g as a,w as s,h as u,j as y,v as z,n as se,m as N,C as k,F as H,q as re,_ as ne}from"./index-c7a0cc4e.js";import{V as ie}from"./vue-draggable-next.esm-bundler-8be8cb1d.js";const ue=(M,v,d)=>Z.post(`/admin/pur/getpurma/${M}/${v}`,d),de={id:"elcheckbox"},pe={class:"basicEx"},ce=ee({__name:"index",setup(M){let v=te(),d=r(1),h=r(10),A=r(0),V=r([]),p=r([]);le(()=>{localStorage.getItem("purmaTableFilter")?(p.value=JSON.parse(localStorage.getItem("purmaTableFilter")||""),w(p.value)):p.value=n.value.map(o=>o.label)}),oe(async()=>{await f()});let B=r(v.buttons.includes("btn.copth.confirm"));const m=r("1"),_=r(window.innerHeight-316),C=[Object.assign({},{id:"1",index:1,condition:"equal",operate:"and",field:"",value:"",header:!0,checked:!0,pid:-1,floor:1})];let I=1;const O=[{key:"销货单别",val:"TH001"},{key:"销货单号",val:"TH002"},{key:"销货序号",val:"TH003"},{key:"品号",val:"TH004"},{key:"品名",val:"TH005"},{key:"规格",val:"TH006"},{key:"销货日期",val:"TG003"},{key:"收款码",val:"SKM"}],U={SKM:{dom:"select",data:[{key:"是",val:"Y"},{key:"否",val:"N"}]},MB109:{dom:"select",data:[{key:"已核准",val:"Y"},{key:"尚待核准",val:"y"},{key:"不准交易",val:"N"}]},TG003:{dom:"date"}},F=()=>{f()},f=async(o=1)=>{d.value=o;let e={conditions:[{}]};e.conditions.splice(0,1),C.forEach(c=>{e.conditions.push(c)});let l=await ue(d.value,h.value,e);l.code==200&&(A.value=l.data.total,l.data.records.forEach((c,S)=>{c.index=S+1+(d.value-1)*h.value}),V.value=l.data.records)},q=()=>{f()},n=r([{strlen:18,label:"供应商编号",prop:"MA001",width:140,vhide:!0,orderby:!0,isShow:!0,sort:0},{strlen:12,label:"简称",prop:"MA002",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"公司全称",prop:"MA003",width:120,vhide:!0,isShow:!0,sort:0},{strlen:15,label:"税号",prop:"MA005",width:230,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"联系电话",prop:"MA008",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"传真",prop:"MA010",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"邮箱",prop:"MA011",width:80,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"负责人",prop:"MA012",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"联系人",prop:"MA013",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"联系地址",prop:"MA014",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"核准状况",prop:"MA016",width:120,vhide:!1,isShow:!0,sort:0},{strlen:8,label:"交易币种",prop:"MA021",width:120,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"最近交易",prop:"MA023",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"付款方式",prop:"MA024",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"付款条件",prop:"MA025",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"价格说明",prop:"MA026",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"发票种类",prop:"MA030",width:120,vhide:!0,isShow:!0,sort:0},{strlen:5,label:"税种",prop:"MA044",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"允许分批交货",prop:"MA045",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"账单地址",prop:"MA051",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"税额",prop:"MA053",width:120,vhide:!1,isShow:!0,sort:0},{strlen:5,label:"税率",prop:"MA064",width:120,vhide:!1,isShow:!0,sort:0}]),G=["TH013","TH008"],P=(o,e)=>(o.rowIndex+1)%2===0?"oddRow":"evenRow";ae(m,(o,e)=>{m.value=="1"?_.value=window.innerHeight-316:_.value=window.innerHeight-228});const w=o=>{n.value.forEach(l=>{o.indexOf(l.label)!=-1?(l.isShow=!0,l.sort=o.indexOf(l.label)-o.length):l.isShow=!1}),n.value.sort((l,c)=>l.sort-c.sort),localStorage.setItem("purmaTableFilter",JSON.stringify(o));const e=o.length;g.value=e===n.value.length,x.value=e>0&&e<n.value.length},g=r(!1),x=r(!1),D=o=>{p.value=o?n.value.map(e=>e.label):[],x.value=!1,w(p.value)};return(o,e)=>{const l=i("el-button"),c=i("el-card"),S=i("el-collapse-item"),R=i("el-collapse"),j=i("Grid"),T=i("el-checkbox"),J=i("el-checkbox-group"),L=i("el-popover"),K=i("el-icon"),Y=i("el-pagination");return b(),E(H,null,[a(R,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t)},{default:s(()=>[a(S,{title:"查询条件",name:"1",style:{}},{default:s(()=>[a(c,{class:"form",style:{}},{default:s(()=>[a(W,{floor:u(I),conditionList:C,"key-list":O,"val-list":U},null,8,["floor"]),a(l,{type:"primary",size:"default",onClick:F},{default:s(()=>[y("查询")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(c,{style:{margin:"10px 0px"}},{default:s(()=>[u(v).buttons.includes("btn.copth.exportexcel")?(b(),z(l,{key:0,type:"primary",size:"default",onClick:e[1]||(e[1]=t=>u(X)("供应商信息.xlsx","#coptgh-table"))},{default:s(()=>[y("导出EXCEL")]),_:1})):se("",!0),a(K,{size:20,style:{float:"right","font-size":"33px","padding-right":"50px"},class:"grid"},{default:s(()=>[a(L,{placement:"bottom",trigger:"hover",width:"80"},{reference:s(()=>[a(l,null,{default:s(()=>[a(j)]),_:1})]),default:s(()=>[N("div",de,[N("div",pe,[a(T,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),indeterminate:x.value,onChange:D},{default:s(()=>[y("全选")]),_:1},8,["modelValue","indeterminate"])]),a(J,{modelValue:u(p),"onUpdate:modelValue":e[4]||(e[4]=t=>k(p)?p.value=t:p=t),onChange:w,class:"checkbox-wrap"},{default:s(()=>[a(u(ie),{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=t=>n.value=t),onEnd:w},{default:s(()=>[(b(!0),E(H,null,re(n.value,(t,$)=>(b(),z(T,{key:$,label:t.label,size:"large",style:{display:"block"}},null,8,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(Q,{id:"coptgh-table",tableData:u(V),height:_.value,columns:n.value,sumArray:G,"row-class-name":P,checkVhide:!1,butPremission:u(B)},null,8,["tableData","height","columns","butPremission"]),a(Y,{"current-page":u(d),"onUpdate:currentPage":e[5]||(e[5]=t=>k(d)?d.value=t:d=t),"page-size":u(h),"onUpdate:pageSize":e[6]||(e[6]=t=>k(h)?h.value=t:h=t),"page-sizes":[10,30,100,500,2e3],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:u(A),onCurrentChange:f,onSizeChange:q},null,8,["current-page","page-size","total"])]),_:1})],64)}}});const we=ne(ce,[["__scopeId","data-v-412ca217"]]);export{we as default};
